<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-grunt-angular-builder/node_modules/grunt-angular-builder/tasks/angular-builder.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-grunt-angular-builder">npmtest-grunt-angular-builder (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-grunt-angular-builder/node_modules/grunt-angular-builder/tasks/angular-builder.js</span></h1>
    <h2>
        
        Statements: <span class="metric">12.12% <small>(8 / 66)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 30)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 14)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">12.12% <small>(8 / 66)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-grunt-angular-builder/node_modules/grunt-angular-builder/tasks/</a> &#187; angular-builder.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @license
 * AngularJS Builder.
 * Copyright 2013 Cláudio Manuel Brás da Silva.
 * http://github.com/claudio-silva
 * Licensed under the MIT license.
 */
'use strict';
&nbsp;
var TASK_NAME = 'angular-builder';
&nbsp;
var TASK_DESCRIPTION = 'Generates a release/debug build of an AngularJS project.';
&nbsp;
/**
 * Utility functions.
 */
var util = require ('./lib/gruntUtil')
  , types = require ('./lib/types');
&nbsp;
var Context = types.Context
  , ContextEvent = types.ContextEvent
  , TaskOptions = types.TaskOptions
  , extend = util.extend
  , fatal = util.fatal
  , info = util.info;
/**
 * Exports a function that will be called by Grunt to register tasks for this plugin.
 * @param grunt The Grunt API.
 */
module.exports = <span class="fstat-no" title="function not covered" >function (grunt)</span>
{
<span class="cstat-no" title="statement not covered" >  util.init (grunt);</span>
&nbsp;
//------------------------------------------------------------------------------
// GRUNT TASK
//------------------------------------------------------------------------------
&nbsp;
<span class="cstat-no" title="statement not covered" >  grunt.registerMultiTask (TASK_NAME, TASK_DESCRIPTION, <span class="fstat-no" title="function not covered" >function ()</span></span>
  {
    //------------------
    // SETUP
    //------------------
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!this.files.length)</span>
<span class="cstat-no" title="statement not covered" >      fatal ('No source files were defined.');</span>
&nbsp;
    /**
     * The default values for all of the Angular Builder's options.
     * @type {TaskOptions}
     */
<span class="cstat-no" title="statement not covered" >    var defaultOptions = new TaskOptions ();</span>
&nbsp;
    /**
     * An ordered list of middleware classes from which the middleware stack will be created later on.
     *
     * Note: when loading the middleware modules, the TaskOptions class becomes augmented with middleware-specific
     * options.
     * @type {MiddlewareInterface[]}
     */
<span class="cstat-no" title="statement not covered" >    var middlewareStackClasses = loadMiddlewareModules (defaultOptions);</span>
&nbsp;
    //-------------------------
    // Process each file group
    //-------------------------
&nbsp;
<span class="cstat-no" title="statement not covered" >    this.files.forEach (<span class="fstat-no" title="function not covered" >function (/** GruntFilesArrayExt */ fileGroup)</span></span>
    {
      // Note: source code analysis information for each file group is reset for each file group,
      // i.e. each group is an independent build.
&nbsp;
<span class="cstat-no" title="statement not covered" >      var context = new Context (grunt, this, defaultOptions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!context.options.mainModule)</span>
<span class="cstat-no" title="statement not covered" >        fatal ('No main module is defined.');</span>
&nbsp;
      /**
       * The sequential list of loaded middleare.
       * These will be reset for each file group.
       * @type {MiddlewareInterface[]}
       */
<span class="cstat-no" title="statement not covered" >      var middlewareStack = assembleMiddleware (middlewareStackClasses, context);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      context.trigger (ContextEvent.ON_INIT);</span>
&nbsp;
      //------------------
      // LOAD SOURCE CODE
      //------------------
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (!fileGroup.dest)</span>
<span class="cstat-no" title="statement not covered" >        fatal ('No target script is defined.');</span>
&nbsp;
      // Pass all the source code trough the 1st stage of the middleware stack.
&nbsp;
<span class="cstat-no" title="statement not covered" >      middlewareStack.forEach (<span class="fstat-no" title="function not covered" >function (/*MiddlewareInterface*/ middleware)</span></span>
      {
<span class="cstat-no" title="statement not covered" >        middleware.analyze (fileGroup);</span>
      });
&nbsp;
<span class="cstat-no" title="statement not covered" >      context.trigger (ContextEvent.ON_AFTER_ANALYZE);</span>
&nbsp;
      //------------------
      // BUILD
      //------------------
&nbsp;
      // Trace the dependency graph and pass each module trough the 2nd stage of the middleware stack.
&nbsp;
<span class="cstat-no" title="statement not covered" >      traceModule (context.options.mainModule, context, <span class="fstat-no" title="function not covered" >function (/*ModuleDef*/module)</span></span>
      {
<span class="cstat-no" title="statement not covered" >        middlewareStack.forEach (<span class="fstat-no" title="function not covered" >function (/*MiddlewareInterface*/ middleare)</span></span>
        {
<span class="cstat-no" title="statement not covered" >          middleare.trace (module);</span>
        });
      });
&nbsp;
<span class="cstat-no" title="statement not covered" >      context.trigger (ContextEvent.ON_AFTER_TRACE);</span>
&nbsp;
      // Pass all the analysed source code trough the 3rd stage of the middleware stack.
&nbsp;
<span class="cstat-no" title="statement not covered" >      middlewareStack.forEach (<span class="fstat-no" title="function not covered" >function (/*MiddlewareInterface*/ middleware)</span></span>
      {
<span class="cstat-no" title="statement not covered" >        middleware.build (fileGroup.dest);</span>
      });
&nbsp;
<span class="cstat-no" title="statement not covered" >      context.trigger (ContextEvent.ON_AFTER_BUILD);</span>
&nbsp;
    }.bind (this));
  });
&nbsp;
  /**
   * Loads all middlewares (both internal and external).
   *
   * @param {TaskOptions} options The task's base default options. Extended options contributed by middleware will be
   * set in turn by each loaded middleware module.
   * @return {Array}
   */
<span class="fstat-no" title="function not covered" >  function loadMiddlewareModules (options)</span>
  {
<span class="cstat-no" title="statement not covered" >    var middlewareStackClasses = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    options.internalMiddleware.forEach (<span class="fstat-no" title="function not covered" >function (moduleName)</span></span>
    {
<span class="cstat-no" title="statement not covered" >      var module = require (moduleName);</span>
<span class="cstat-no" title="statement not covered" >      if (!module.middleware)</span>
<span class="cstat-no" title="statement not covered" >        util.fatal ('No middleware found on module %.', moduleName);</span>
<span class="cstat-no" title="statement not covered" >      if (module.options)</span>
<span class="cstat-no" title="statement not covered" >        extend (options, module.options);</span>
<span class="cstat-no" title="statement not covered" >      middlewareStackClasses.push (module.middleware);</span>
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (options.externalMiddleware)</span>
<span class="cstat-no" title="statement not covered" >      options.externalMiddleware.forEach (<span class="fstat-no" title="function not covered" >function (info)</span></span>
      {
<span class="cstat-no" title="statement not covered" >        var module = require (info.load);</span>
<span class="cstat-no" title="statement not covered" >        if (module.options)</span>
<span class="cstat-no" title="statement not covered" >          extend (options, new module.options ());</span>
<span class="cstat-no" title="statement not covered" >        var target = info.before || info.after</span>
          , i = middlewareStackClasses.indexOf (target);
<span class="cstat-no" title="statement not covered" >        if (~i)</span>
<span class="cstat-no" title="statement not covered" >          util.fatal ("Can't locate the % middleware module for inserting %.", target, info.load);</span>
<span class="cstat-no" title="statement not covered" >        middlewareStackClasses.splice (i + (info.before ? 0 : 1), 0, module.middleware);</span>
      });
&nbsp;
<span class="cstat-no" title="statement not covered" >    return middlewareStackClasses;</span>
  }
&nbsp;
  /**
   * Creates a new instance of each loaded middleware and assembles them into a sequential list.
   * @param {MiddlewareInterface[]} middlewareStackClasses An ordered list of classes to be instantiated.
   * @param {Context} context The build execution context.
   * @returns {MiddlewareInterface[]}
   */
<span class="fstat-no" title="function not covered" >  function assembleMiddleware (middlewareStackClasses, context)</span>
  {
<span class="cstat-no" title="statement not covered" >    var middlewares = [];</span>
<span class="cstat-no" title="statement not covered" >    middlewareStackClasses.forEach (<span class="fstat-no" title="function not covered" >function (MiddlewareClass)</span></span>
    {
<span class="cstat-no" title="statement not covered" >      middlewares.push (new MiddlewareClass (context));</span>
    });
<span class="cstat-no" title="statement not covered" >    return middlewares;</span>
  }
&nbsp;
  /**
   * Traces a dependency graph for the specified module and calls the given callback
   * to process each required module in the correct loading order.
   * @param {string} moduleName
   * @param {Context} context The execution context for the middleware stack.
   * @param {function(ModuleDef)} processHook
   */
<span class="fstat-no" title="function not covered" >  function traceModule (moduleName, context, processHook)</span>
  {
<span class="cstat-no" title="statement not covered" >    var module = context.modules[moduleName];</span>
<span class="cstat-no" title="statement not covered" >    if (!module)</span>
<span class="cstat-no" title="statement not covered" >      fatal ('Module &lt;cyan&gt;%&lt;/cyan&gt; was not found.', moduleName);</span>
    // Ignore the module if it's external.
<span class="cstat-no" title="statement not covered" >    if (module.external)</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    // Include required submodules first.
<span class="cstat-no" title="statement not covered" >    if (module.requires) {</span>
<span class="cstat-no" title="statement not covered" >      module.requires.forEach (<span class="fstat-no" title="function not covered" >function (modName)</span></span>
      {
<span class="cstat-no" title="statement not covered" >        traceModule (modName, context, processHook);</span>
      });
    }
    // Ignore references to already loaded modules or to explicitly excluded modules.
<span class="cstat-no" title="statement not covered" >    if (!context.loaded[module.name] &amp;&amp; !~context.options.excludedModules.indexOf (module.name)) {</span>
<span class="cstat-no" title="statement not covered" >      info ('Including module &lt;cyan&gt;%&lt;/cyan&gt;.', moduleName);</span>
<span class="cstat-no" title="statement not covered" >      context.loaded[module.name] = true;</span>
<span class="cstat-no" title="statement not covered" >      processHook (module);</span>
    }
  }
&nbsp;
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 25 2017 07:15:05 GMT+0000 (UTC)</div>
</div>
</body>
</html>
